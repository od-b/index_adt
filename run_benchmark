#!/bin/bash

# text background colors
REDB='\033[41m'
GRNB='\033[42m'
BLUB='\033[44m'
YELB='\033[43m'
WHTB='\033[47m'

# text colors
RED='\033[0;31m'
GRN='\033[0;32m'
BLU='\033[0;34m'
YEL='\033[0;33m'
WHT='\033[0;37m'

RES='\033[0m'

clear
echo -e $YEL'Benchmark to csv file? (enter to just run)'$RES
echo -e -n $WHT'benchmarks/'$RES
read outputFile

if [[ $outputFile ]]; then
  clear
  echo -e $YEL'Logging times to '$RES
  echo -e $WHT'benchmarks/'$RES$outputFile'_tree'.csv$RES
  echo -e $WHT'benchmarks/'$RES$outputFile'_list'.csv$RES
  # echo -e -n $YEL'iterations: '$RES
  # read n_loops
  increment=10
  stop=200
  n_loops=10

  n_mail=10
  min_words=30
  max_words=40

  # echo -e -n $YEL'n_mail: '$RES
  # read n_mail
  # echo -e -n $YEL'min_words: '$RES
  # read min_words
  # echo -e -n $YEL'max_words: '$RES
  # read max_words
  while [ $min_words -le $stop ] 
  do
    i=0
    while [ $i -le $n_loops ] 
    do
      ./spamfilter_list benchmarks/$outputFile'_list_'$min_words.csv $n_mail $min_words $max_words $i $n_loops
      ./spamfilter_tree benchmarks/$outputFile'_tree_'$min_words.csv $n_mail $min_words $max_words $i $n_loops
      ((i++))
    done
    python3 benchmarks/add_benchmark.py benchmarks/$outputFile'_list_'$min_words.csv benchmarks/$outputFile'_tree_'$min_words.csv $n_mail $min_words $max_words $n_loops
    ((n_mail+=20))
    ((min_words+=increment))
    ((max_words+=increment))
    ((increment+=10))
    echo -e n_mail: $n_mail
  done
else
  SPAM_DIR='data/spam'
  NONSPAM_DIR='data/nonspam'
  MAIL_DIR='data/mail'
  clear
  echo -e $YEL'spamfilter_list:'$RES
  ./spamfilter_list $SPAM_DIR $NONSPAM_DIR $MAIL_DIR
  echo
  echo -e $YEL'spamfilter_tree:'$RES
  ./spamfilter_tree $SPAM_DIR $NONSPAM_DIR $MAIL_DIR
  echo
fi
